<nav class="navbar bg-base-100 shadow-md px-8">
  <div class="w-full flex justify-between items-center">

    <!-- LEFT SECTION -->
    <div class="flex items-center gap-10">

      <!-- Brand -->
      <a href="{% url 'forum-home' %}" class="flex items-center gap-2">
        <div class="w-8 h-8 flex items-center justify-center bg-primary rounded-lg">
          <svg viewBox="0 0 24 24" class="w-5 h-5 text-white">
            <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
          </svg>
        </div>
        <span class="font-bold text-lg">StudyHub</span>
      </a>

      <!-- Desktop Links -->
      <div class="hidden md:flex items-center gap-6">

        <a href="{% url 'forum-home' %}" class="flex items-center gap-1 hover:text-primary">
          <span>Home</span>
        </a>

        <a href="{% url 'thread-list' %}" class="flex items-center gap-1 hover:text-primary">
          <span>Threads</span>
        </a>

        {% if user.is_staff or user.groups.all|length > 0 %}
        <a href="{% url 'report-list' %}" class="hover:text-primary">
          Reports
        </a>
        {% endif %}

      </div>
    </div>

    <!-- RIGHT SECTION -->
    <div class="flex items-center gap-6">

      {% if user.is_authenticated %}
      <!-- New Thread Button -->
      <a href="{% url 'thread-create' %}" class="btn btn-primary btn-sm">
        New Thread
      </a>
      {% endif %}

      <!-- Profile Dropdown -->
      <div class="dropdown dropdown-end">
        <label tabindex="0" class="btn btn-ghost btn-circle avatar">
          <div class="w-8 rounded-full bg-primary text-white items-center justify-center" style="display: flex;!important ">
            {% if user.is_authenticated %}
              <span class="text-sm font-semibold">
                {{ user.username|first|upper }}
              </span>
            {% else %}
              <svg viewBox="0 0 24 24" class="w-5 h-5">
                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                <circle cx="12" cy="7" r="4"/>
              </svg>
            {% endif %}
          </div>
        </label>

        <ul tabindex="0"
            class="dropdown-content menu bg-base-200 rounded-box w-52 p-2 shadow border border-base-300 mt-3">

          {% if user.is_authenticated %}
            <li class="menu-title">
              <span>{{ user.username }}</span>
              {% if user.email %}
                <span class="text-xs opacity-60">{{ user.email }}</span>
              {% endif %}
            </li>

            <li><a href="{% url 'account_email' %}">Account Settings</a></li>
            <li><a href="{% url 'account_change_password' %}">Change Password</a></li>
            <li><a href="{% url 'account_logout' %}" class="text-error">Logout</a></li>

          {% else %}
            <li><a href="{% url 'account_login' %}">Login</a></li>
            <li><a href="{% url 'account_signup' %}">Sign Up</a></li>
          {% endif %}
        </ul>
      </div>

      <!-- Mobile Menu Button -->
      <div class="md:hidden">
        <button class="btn btn-ghost btn-circle" onclick="toggleMobileMenu()">
          â˜°
        </button>
      </div>

    </div>
  </div>
</nav>
